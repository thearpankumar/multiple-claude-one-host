FROM python:3.13.9-slim

ENV DEBIAN_FRONTEND=noninteractive
ENV RUSTUP_HOME=/opt/rustup
ENV CARGO_HOME=/opt/cargo
ENV PATH=/opt/cargo/bin:$PATH

# System deps
RUN apt update && apt install -y \
    curl git ca-certificates build-essential \
    && rm -rf /var/lib/apt/lists/*

# Install Rust 1.91.1
RUN curl https://sh.rustup.rs -sSf | bash -s -- -y \
    && rustup toolchain install 1.91.1 \
    && rustup default 1.91.1

# Install Claude Code
RUN curl -fsSL https://claude.ai/install.sh | bash

ENV PATH="/root/.local/bin:${PATH}"

WORKDIR /workspace
ENTRYPOINT ["claude"]

